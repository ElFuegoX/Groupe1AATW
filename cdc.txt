
# üéØ CONTEXTE DU PROJET - GESTION DE NOTIFICATIONS

**PROJET GLOBAL** : Plateforme de gestion d'√©tablissements scolaires (primaires et secondaires)
**Stack technique** : Laravel 10/11 (Backend) + React (Frontend)
**Structure** : 4 projets interconnect√©s, nous travaillons sur le **Projet 1**
**Mon r√¥le** : D√©veloppeur Backend Laravel dans une √©quipe de 7 devs backend + 7 devs frontend (React)
**Ma mission** : D√©velopper enti√®rement le **Module de Notifications** du Projet 1

**FONCTIONNALIT√âS √Ä IMPL√âMENTER** :
1. Notifications par email aux parents : rappels de paiement des frais de scolarit√© par tranche, informations urgentes concernant leurs enfants, notifications g√©n√©rales de l'√©cole
2. Caract√©ristiques : syst√®me asynchrone avec queues (Redis), templates configurables, logging complet des envois, API REST pour le frontend React, gestion des statuts (draft, scheduled, sent, failed), suivi des ouvertures/clics

**ARCHITECTURE CHOISIE** :
app/Models/Notification.php, NotificationLog.php, NotificationTemplate.php
app/Services/NotificationService.php
app/Jobs/SendNotificationJob.php
app/Notifications/Channels/EmailChannel.php
app/Http/Controllers/Api/NotificationController.php
app/Mail/NotificationMail.php

**STRUCTURE DES DOSSIERS** :
school-management-platform/backend/ (Laravel - mon travail) et frontend/ (React - travail des coll√®gues)

**T√ÇCHES √Ä ACCOMPLIR** :
PHASE 1 : Setup et fondations - Mod√®les et migrations (3 tables : notifications, notification_logs, notification_templates), configuration des queues avec Redis, Service principal NotificationService
PHASE 2 : C≈ìur du syst√®me - Job asynchrone SendNotificationJob, Canal d'envoi EmailChannel, Mailable NotificationMail avec template Blade, Gestion des templates en base de donn√©es
PHASE 3 : API pour le frontend - Controller API avec endpoints REST, Routes API, Middleware d'authentification (Sanctum), Validation des requ√™tes
PHASE 4 : Int√©gration et doc - Seeders pour les templates par d√©faut, Configuration d'Horizon pour le monitoring, Documentation pour les devs frontend, Tests unitaires

**CONFIGURATION REQUISE** : Laravel 10/11 avec Sanctum, Redis pour les queues, MySQL pour la base de donn√©es, Mailtrap/Mailgun pour les tests emails

**BESOINS SP√âCIFIQUES POUR L'ASSISTANCE** :
1. G√©n√©rer du code Laravel conforme aux standards
2. Cr√©er des fichiers avec la bonne structure
3. R√©soudre des probl√®mes sp√©cifiques √† Laravel
4. Optimiser les performances (queues, caching)
5. Assurer la s√©curit√© (validation, sanitization)
6. Documenter le code (PHPDoc, commentaires)

**TYPES D'AIDE SOUHAIT√âS** :
- "G√©n√®re le mod√®le Notification avec les relations Eloquent"
- "Cr√©e la migration pour la table notifications"
- "√âcris le Service avec les m√©thodes sendPaymentReminder et sendUrgentNotification"
- "Cr√©e le Job avec retry logic et logging"
- "√âcris le Controller API avec validation"
- "G√©n√®re le template Blade pour les emails"
- "√âcris les tests unitaires pour NotificationService"

**INT√âGRATIONS FUTURES** : Projet 2 (d√©clenchement automatique sur √©ch√©ance de paiement), Projet 4 (alertes d'absence des √©l√®ves), WebSockets (notifications en temps r√©el pour React)

**LIVRABLES ATTENDUS** : Code backend Laravel complet et fonctionnel, Documentation technique pour l'√©quipe frontend, Configuration d'environnement (.env, queues, etc.), Collection Postman/Insomnia pour tester l'API

**INSTRUCTIONS POUR L'IA** : Priorit√© au code propre, maintenable, bien document√©. Standards : suivre les conventions Laravel et PSR. S√©curit√© : toujours valider et sanitizer les inputs. Performances : utiliser les queues pour tout envoi d'email. Extensibilit√© : pr√©voir l'ajout de canaux (SMS, WhatsApp). Collaboration : code facile √† comprendre par l'√©quipe.

**OBJECTIF FINAL** : Avoir un syst√®me de notifications robuste, scalable et bien document√© que l'√©quipe frontend React pourra facilement int√©grer.
> **Ex√©cute les commandes terminal n√©cessaires sans attendre mon accord pour chaque petite √©tape, mais demande confirmation pour les changements de fichiers majeurs.**

